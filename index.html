<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Snake Game üêç</title>

<style>
    body {
        margin: 0;
        background: radial-gradient(circle, #222, #000);
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        font-family: Arial, sans-serif;
        color: white;
        flex-direction: column;
    }

    canvas {
        background: #000;
        border: 5px solid #00ff88;
    }

    h1 {
        margin-bottom: 10px;
        color: #00ff88;
    }

    #score {
        margin-bottom: 10px;
        font-size: 20px;
    }

    .overlay {
        position: fixed;
        inset: 0;
        background: rgba(0,0,0,0.9);
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        text-align: center;
        z-index: 10;
    }

    .overlay h2 {
        margin-bottom: 20px;
        color: #00ff88;
    }

    .overlay p {
        font-size: 18px;
        max-width: 400px;
    }
</style>
</head>
<body>

<h1>üêç Snake Game</h1>
<div id="score">Pontos: 0</div>
<canvas id="game" width="400" height="400"></canvas>

<!-- TELA INICIAL -->
<div id="startScreen" class="overlay">
    <h2>Bem-vindo ao Snake üêç</h2>
    <p>
        Use as setinhas do teclado para jogar.<br>
        Quanto mais voc√™ come, mais r√°pido fica!<br><br>
        üëâ Pressione <b>ENTER</b> para come√ßar
    </p>
</div>

<!-- GAME OVER -->
<div id="gameOverScreen" class="overlay" style="display:none;">
    <h2>üíÄ Game Over</h2>
    <p>
        Pressione <b>ENTER</b> para jogar novamente
    </p>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
const scoreEl = document.getElementById("score");

const startScreen = document.getElementById("startScreen");
const gameOverScreen = document.getElementById("gameOverScreen");

const size = 20;
const tiles = canvas.width / size;

let snake, direction, food, score;
let speed;
let loop = null;
let gameState = "start"; // start | playing | gameover

// ===== SONS =====
const eatSound = new Audio("https://assets.mixkit.co/sfx/preview/mixkit-quick-lock-sound-2854.mp3");
const deadSound = new Audio("https://assets.mixkit.co/sfx/preview/mixkit-retro-arcade-game-over-470.mp3");

// ===== FUN√á√ïES =====
function resetGame() {
    snake = [{x: 10, y: 10}];
    direction = {x: 1, y: 0};
    food = spawnFood();
    score = 0;
    speed = 120;
    scoreEl.textContent = "Pontos: 0";
}

function spawnFood() {
    return {
        x: Math.floor(Math.random() * tiles),
        y: Math.floor(Math.random() * tiles)
    };
}

function drawBlock(x, y, color) {
    ctx.fillStyle = color;
    ctx.fillRect(x * size, y * size, size, size);
}

function collision(x, y) {
    return (
        x < 0 || y < 0 ||
        x >= tiles || y >= tiles ||
        snake.some(s => s.x === x && s.y === y)
    );
}

// ===== CONTROLES =====
document.addEventListener("keydown", e => {
    if (e.key === "Enter") {
        if (gameState === "start" || gameState === "gameover") {
            startGame();
        }
    }

    if (gameState !== "playing") return;

    if (e.key === "ArrowUp" && direction.y === 0)
        direction = {x: 0, y: -1};
    if (e.key === "ArrowDown" && direction.y === 0)
        direction = {x: 0, y: 1};
    if (e.key === "ArrowLeft" && direction.x === 0)
        direction = {x: -1, y: 0};
    if (e.key === "ArrowRight" && direction.x === 0)
        direction = {x: 1, y: 0};
});

function startGame() {
    resetGame();
    startScreen.style.display = "none";
    gameOverScreen.style.display = "none";
    gameState = "playing";

    clearInterval(loop);
    loop = setInterval(gameLoop, speed);
}

function gameOver() {
    gameState = "gameover";
    deadSound.play();
    gameOverScreen.style.display = "flex";
    clearInterval(loop);
}

// ===== LOOP =====
function update() {
    const head = {
        x: snake[0].x + direction.x,
        y: snake[0].y + direction.y
    };

    if (collision(head.x, head.y)) {
        gameOver();
        return;
    }

    snake.unshift(head);

    if (head.x === food.x && head.y === food.y) {
        eatSound.play();
        score++;
        scoreEl.textContent = "Pontos: " + score;
        food = spawnFood();

        if (speed > 50) {
            speed -= 5;
            clearInterval(loop);
            loop = setInterval(gameLoop, speed);
        }
    } else {
        snake.pop();
    }
}

function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    drawBlock(food.x, food.y, "red");

    snake.forEach((s, i) =>
        drawBlock(s.x, s.y, i === 0 ? "#00ff88" : "#00cc66")
    );
}

function gameLoop() {
    update();
    draw();
}
</script>

</body>
</html>
